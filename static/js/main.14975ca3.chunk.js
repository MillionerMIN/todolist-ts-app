(this["webpackJsonptodolist-ts-app"]=this["webpackJsonptodolist-ts-app"]||[]).push([[0],{100:function(t,e,n){},128:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),i=n(12),o=n.n(i);n(100),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,s,l=n(73),d=n.n(l),u=n(39),j=n(174),f=n(165),O=n(179),b=n(80),T=n.n(b),h=n(74),p=n.n(h),m=n(5),v=c.a.memo((function(t){console.log("AddItemForm call");var e=t.addItem,n=t.entityStatus,c=Object(a.useState)(""),i=Object(u.a)(c,2),o=i[0],r=i[1],s=Object(a.useState)(null),l=Object(u.a)(s,2),d=l[0],b=l[1],h=function(){""!==o.trim()?(e(o),r("")):b("Title is required")};return Object(m.jsxs)("div",{className:p.a.textField,children:[Object(m.jsx)(j.a,{value:o,onChange:function(t){r(t.currentTarget.value)},onKeyPress:function(t){null!==d&&b(null),13===t.charCode&&h()},error:!!d,id:"outlined-basic",label:"Title",variant:"outlined",helperText:d,disabled:"loading"===n}),Object(m.jsx)(f.a,{color:"primary",size:"small",onClick:h,disabled:"loading"===n,children:Object(m.jsx)(O.a,{title:"Add","aria-label":"add",children:Object(m.jsx)(T.a,{})})})]})})),g=n(53),S=n.n(g),k=c.a.memo((function(t){console.log("EditableSpan call");var e=Object(a.useState)(!1),n=Object(u.a)(e,2),c=n[0],i=n[1],o=Object(a.useState)(""),r=Object(u.a)(o,2),s=r[0],l=r[1];return c?Object(m.jsx)(j.a,{label:"rename task",variant:"outlined",size:"small",value:s,onBlur:function(){i(!1),t.onChange(s)},autoFocus:!0,onChange:function(t){return l(t.currentTarget.value)}}):Object(m.jsx)("span",{onDoubleClick:function(){i(!0),l(t.value)},children:t.value})})),C=n(167),x=n(166),I=n(176),E=n(81),A=n.n(E),_=n(8),y=n(82),D=n.n(y).a.create(Object(_.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"c776464e-9336-49f9-96f6-6e3857c87294"}}));!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(r||(r={})),function(t){t[t.Low=0]="Low",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(s||(s={}));var w=function(t){return D.get("todo-lists/".concat(t,"/tasks"))},L=function(t,e){return D.post("todo-lists/".concat(t,"/tasks"),{title:e})},N=function(t,e,n){return D.put("todo-lists/".concat(t,"/tasks/").concat(e),Object(_.a)({},n))},R=function(t,e){return D.delete("todo-lists/".concat(t,"/tasks/").concat(e))},F=c.a.memo((function(t){var e=t.todolistId,n=t.task,c=t.onRemoveTask,i=t.onChangeTaskStatus,o=t.onChangeTitle,s=Object(a.useCallback)((function(){c(n.id,e)}),[c,n.id,e]),l=Object(a.useCallback)((function(t){var a=t.currentTarget.checked;i(n.id,a?r.Completed:r.New,e)}),[i,n.id,e]),d=Object(a.useCallback)((function(t){o(n.id,t,e)}),[o,n.id,e]);return Object(m.jsxs)("div",{className:n.status===r.Completed?A.a.is_done:"",children:[Object(m.jsx)(I.a,{color:"primary",checked:n.status===r.Completed,onChange:l}),Object(m.jsx)(k,{value:n.title,onChange:d}),Object(m.jsx)(O.a,{title:"Delete",children:Object(m.jsx)(f.a,{onClick:s,children:Object(m.jsx)(x.a,{})})})]},n.id)})),P=n(21),K=n(38),G=n(52),H={status:"idle",error:null},M=function(t){return{type:"APP/SET-STATUS",status:t}},U=function(t){return{type:"APP/SET-ERROR",error:t}},V=function(t,e){t.messages.length?e(U(t.messages[0])):e(U("Some error occurred")),e(M("failed"))},B=function(t,e){e(U(t)),e(M("failed"))},z={},J=c.a.memo((function(t){var e=t.id,n=t.title,c=t.tasks,i=t.addTask,o=t.changeTitleTodolist,s=t.changeFilter,l=t.removeTodolist,d=t.removeTask,u=t.changeTaskStatus,j=t.changeTitleTask,b=t.entityStatus,T=Object(P.b)();Object(a.useEffect)((function(){var t;T((t=e,function(e){e(M("loading")),w(t).then((function(n){var a=n.data.items;e(function(t,e){return{type:"SET_TASKS",tasks:t,todolistId:e}}(a,t)),e(M("succeeded"))})).catch((function(t){B(t.message,e)}))}))}),[T,e]);var h=Object(a.useCallback)((function(t){i(t,e)}),[i,e]),p=Object(a.useCallback)((function(){l(e)}),[l,e]),g=Object(a.useCallback)((function(t){o(t,e)}),[o,e]),I=Object(a.useCallback)((function(){s("all",e)}),[s,e]),E=Object(a.useCallback)((function(){s("active",e)}),[s,e]),A=Object(a.useCallback)((function(){s("completed",e)}),[s,e]),_=c;return"active"===t.filter&&(_=c.filter((function(t){return t.status===r.New}))),"completed"===t.filter&&(_=c.filter((function(t){return t.status===r.Completed}))),Object(m.jsxs)("div",{className:S.a.wrapper,children:[Object(m.jsxs)("h3",{children:[Object(m.jsx)(k,{value:n,onChange:g}),Object(m.jsx)(O.a,{title:"Delete",children:Object(m.jsx)(f.a,{onClick:p,disabled:"loading"===b,children:Object(m.jsx)(x.a,{})})})]}),Object(m.jsx)(v,{addItem:h,entityStatus:b}),Object(m.jsx)("div",{children:_.map((function(t){return Object(m.jsx)(F,{task:t,todolistId:e,onRemoveTask:d,onChangeTaskStatus:u,onChangeTitle:j},t.id)}))}),Object(m.jsxs)("div",{children:[Object(m.jsx)(C.a,{variant:"all"===t.filter?"outlined":"text",onClick:I,color:"default",children:"All"}),Object(m.jsx)(C.a,{className:"active"===t.filter?S.a.active_filter:"",variant:"active"===t.filter?"outlined":"text",onClick:E,color:"primary",children:"Active"}),Object(m.jsx)(C.a,{className:"completed"===t.filter?S.a.active_filter:"",variant:"completed"===t.filter?"outlined":"text",onClick:A,color:"secondary",children:"Completed"})]})]})})),W=n(168),Y=n(169),q=n(170),X=n(172),$=n(173),Q=n(129),Z=n(84),tt=n.n(Z),et=n(171),nt=function(){return D.get("todo-lists")},at=function(t){return D.post("todo-lists",{title:t})},ct=function(t,e){return D.put("todo-lists/".concat(t),{title:e})},it=function(t){return D.delete("todo-lists/".concat(t))},ot=[],rt=function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",id:t,entityStatus:e}},st=n(178),lt=n(175);function dt(t){return Object(m.jsx)(lt.a,Object(_.a)({elevation:6,variant:"filled"},t))}function ut(){var t=Object(P.c)((function(t){return t.app.error})),e=Object(P.b)(),n=function(t,n){"clickaway"!==n&&e(U(null))};return Object(m.jsx)(st.a,{open:null!==t,autoHideDuration:6e3,onClose:n,children:Object(m.jsx)(dt,{onClose:n,severity:"error",children:t})})}var jt=function(){var t=Object(P.c)((function(t){return t.todolists})),e=Object(P.c)((function(t){return t.tasks})),n=Object(P.c)((function(t){return t.app.status})),c=Object(P.b)();Object(a.useEffect)((function(){c((function(t){t(M("loading")),nt().then((function(e){t({type:"SET_TODOLISTS",todolists:e.data}),t(M("succeeded"))})).catch((function(e){B(e.message,t)}))}))}),[c]);var i=Object(a.useCallback)((function(t,e){c(function(t,e){return function(n){n(M("loading")),L(e,t).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;n({type:"ADD-TASK",task:e}),n(M("succeeded"))}else V(t.data,n)})).catch((function(t){B(t.message,n)}))}}(t,e))}),[c]),o=Object(a.useCallback)((function(t,e){c(function(t,e){return function(n){n(M("loading")),R(t,e).then((function(a){0===a.data.resultCode?(n(function(t,e){return{type:"REMOVE-TASK",taskId:t,todolistId:e}}(e,t)),n(M("succeeded"))):V(a.data,n)})).catch((function(t){B(t.message,n)}))}}(e,t))}),[c]),r=Object(a.useCallback)((function(t,e,n){c(function(t,e,n){return function(a,c){var i=c().tasks[t].find((function(t){return t.id===e}));if(i){var o={title:n,description:i.description,completed:i.completed,status:i.status,priority:i.priority,startDate:i.startDate,deadline:i.deadline};a(M("loading")),N(t,e,o).then((function(c){0===c.data.resultCode?(a(function(t,e,n){return{type:"CHANGE-TASK-TITLE",id:t,newTitle:e,todolistId:n}}(e,n,t)),a(M("succeeded"))):V(c.data,a)})).catch((function(t){B(t.message,a)}))}}}(n,t,e))}),[c]),s=Object(a.useCallback)((function(t,e,n){c(function(t,e,n){return function(a,c){var i=c().tasks[t].find((function(t){return t.id===e}));if(i){if(i){var o={title:i.title,description:i.description,completed:i.completed,status:n,priority:i.priority,startDate:i.startDate,deadline:i.deadline};a(M("loading")),N(t,e,o).then((function(c){0===c.data.resultCode?(a(function(t,e,n){return{type:"CHANGE-TASK-STATUS",id:t,status:e,todolistId:n}}(e,n,t)),a(M("succeeded"))):V(c.data,a)})).catch((function(t){B(t.message,a)}))}}else console.warn("task not found in the state")}}(n,t,e))}),[c]),l=Object(a.useCallback)((function(t){var e;c((e=t,function(t){t(M("loading")),t(rt(e,"loading")),it(e).then((function(n){0===n.data.resultCode?(t(function(t){return{type:"REMOVE-TODOLIST",id:t}}(e)),t(M("succeeded")),t(rt(e,"succeeded"))):V(n.data,t)})).catch((function(e){B(e.message,t)}))}))}),[c]),u=Object(a.useCallback)((function(t){c(function(t){return function(e){e(M("loading")),at(t).then((function(t){0===t.data.resultCode?(e({type:"ADD-TODOLIST",todolist:t.data.data.item}),e(M("succeeded"))):V(t.data,e)})).catch((function(t){B(t.message,e)}))}}(t))}),[c]),j=Object(a.useCallback)((function(t,e){var n=function(t,e){return{type:"CHANGE-TODOLIST-FILTER",newFilterValue:t,todolistId:e}}(t,e);c(n)}),[c]),O=Object(a.useCallback)((function(t,e){c(function(t,e){return function(n){n(M("loading")),ct(t,e).then((function(a){0===a.data.resultCode?(n(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",todolistId:t,title:e}}(t,e)),n(M("succeeded"))):V(a.data,n)})).catch((function(t){B(t.message,n)}))}}(e,t))}),[c]);return Object(m.jsxs)("div",{className:d.a.app,children:[Object(m.jsx)(ut,{}),Object(m.jsxs)(W.a,{position:"static",children:[Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(f.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(m.jsx)(tt.a,{})}),Object(m.jsx)(q.a,{variant:"h6",children:"News"}),Object(m.jsx)(C.a,{color:"inherit",children:"Login"})]}),"loading"===n&&Object(m.jsx)(et.a,{})]}),Object(m.jsxs)(X.a,{fixed:!0,children:[Object(m.jsx)($.a,{container:!0,style:{padding:"20px"},children:Object(m.jsx)(v,{addItem:u,entityStatus:n})}),Object(m.jsx)($.a,{container:!0,spacing:3,children:t.map((function(t){return Object(m.jsx)($.a,{item:!0,children:Object(m.jsx)(Q.a,{elevation:3,children:Object(m.jsx)(J,{id:t.id,title:t.title,entityStatus:t.entityStatus,addTask:i,tasks:e[t.id],removeTask:o,changeFilter:j,changeTaskStatus:s,changeTitleTask:r,filter:t.filter,removeTodolist:l,changeTitleTodolist:O},t.id)})},t.id)}))})]})]})},ft=n(54),Ot=n(85),bt=Object(ft.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TASKS":var n=Object(_.a)({},t);return n[e.todolistId]=e.tasks,n;case"REMOVE-TASK":var a=Object(_.a)({},t);return a[e.todolistId]=a[e.todolistId].filter((function(t){return t.id!==e.taskId})),a;case"ADD-TASK":var c=Object(_.a)({},t),i=c[e.task.todoListId],o=[e.task].concat(Object(G.a)(i));return c[e.task.todoListId]=o,c;case"CHANGE-TASK-STATUS":return Object(_.a)(Object(_.a)({},t),{},Object(K.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.id?Object(_.a)(Object(_.a)({},t),{},{status:e.status}):t}))));case"CHANGE-TASK-TITLE":return Object(_.a)(Object(_.a)({},t),{},Object(K.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.id?Object(_.a)(Object(_.a)({},t),{},{title:e.newTitle}):t}))));case"ADD-TODOLIST":return Object(_.a)(Object(_.a)({},t),{},Object(K.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var r=Object(_.a)({},t);return delete r[e.id],r;case"SET_TODOLISTS":var s=Object(_.a)({},t);return e.todolists.forEach((function(t){s[t.id]=[]})),s;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"ADD-TODOLIST":return[Object(_.a)(Object(_.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(G.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todolistId?Object(_.a)(Object(_.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todolistId?Object(_.a)(Object(_.a)({},t),{},{filter:e.newFilterValue}):t}));case"SET_TODOLISTS":return e.todolists.map((function(t){return Object(_.a)(Object(_.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(_.a)(Object(_.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(_.a)(Object(_.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(_.a)(Object(_.a)({},t),{},{error:e.error});default:return t}}}),Tt=Object(ft.c)(bt,Object(ft.a)(Ot.a));window.store=Tt,o.a.render(Object(m.jsx)(P.a,{store:Tt,children:Object(m.jsx)(jt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},53:function(t,e,n){t.exports={wrapper:"Todolist_wrapper__2bTnM",error:"Todolist_error__KgnzM",error_message:"Todolist_error_message__1Jtf2",active_filter:"Todolist_active_filter__1Pslf"}},73:function(t,e,n){t.exports={app:"App_app__2-W1N"}},74:function(t,e,n){t.exports={textField:"AddItemForm_textField__4dGrf",error:"AddItemForm_error__9krIR",error_message:"AddItemForm_error_message__1tFgy"}},81:function(t,e,n){t.exports={is_done:"Tasks_is_done__2MaXB"}}},[[128,1,2]]]);
//# sourceMappingURL=main.14975ca3.chunk.js.map